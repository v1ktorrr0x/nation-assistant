<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nation Assistant - AI Response Styling Test</title>
    <link rel="stylesheet" href="styles/sidepanel.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Test page specific styles */
        .test-container {
            max-width: 400px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .test-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(208, 255, 22, 0.2);
        }
        
        .test-title {
            color: #D0FF16;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .test-subtitle {
            color: #888888;
            font-size: 12px;
        }
        
        .test-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        /* Add some spacing between test sections */
        .test-section {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .test-section:last-child {
            border-bottom: none;
        }
        
        .section-label {
            color: #D0FF16;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 16px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <div class="test-title">AI Response Styling Test</div>
            <div class="test-subtitle">Testing all color variations and dark grey implementation</div>
        </div>
        
        <div class="test-messages">
            <!-- Real AI Response Example -->
            <div class="test-section">
                <div class="section-label">Real AI Response Structure</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:34</span>
                    </div>
                    <div class="message-content">
                        <p>The code snippet provided is part of an <strong>LLMService</strong> class that handles interactions with an AI language model via an API. Here are the key points:</p>
                        
                        <h3>Initialization Methods</h3>
                        <p><strong><code>async init()</code>:</strong> Loads settings from storage and sets up the service if not already initialized.</p>
                        <p><strong><code>async initWithConfig(config)</code>:</strong> Sets up the service with a provided configuration object, including API key, URL, model, max tokens, and temperature.</p>
                        
                        <h3>Loading Settings</h3>
                        <p><strong><code>async loadSettings()</code>:</strong> Retrieves API key and URL from Chrome storage, with fallback defaults.</p>
                        
                        <h3>Making API Requests</h3>
                        <p><strong><code>async makeRequest(messages, options)</code>:</strong> Sends chat prompts to the API, handles errors, and returns the AI's response.</p>
                        
                        <h3>Response Formatting</h3>
                        <p><strong><code>formatResponse(rawResponse)</code>:</strong> Parses the raw response, especially JSON data, and formats it into human-readable summaries, including page overviews, features, and calls to action.</p>
                        
                        <h3>Chat with Web Page Content</h3>
                        <p><strong><code>async chatWithPage(pageContent, userQuery, chatHistory)</code>:</strong> Prepares prompts to ask the AI about webpage content, defaulting to asking for a brief overview.</p>
                        
                        <h3>Additional Features</h3>
                        <p><strong><code>async smartTranslate(text)</code>:</strong> Detects language, chooses translation target, and returns translated text in a structured JSON format.</p>
                        
                        <h2>Summary</h2>
                        <p><strong>Overall,</strong> this class manages configuration, API communication, response processing, and content interaction to enable AI-powered assistance within a web extension.</p>
                    </div>
                    <div class="message-actions">
                        <button class="action-btn" data-action="copy" title="Copy message">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="action-btn" data-action="regenerate" title="Regenerate response">
                            <i class="fas fa-redo"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Basic Text Formatting -->
            <div class="test-section">
                <div class="section-label">Basic Text Formatting</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:35</span>
                    </div>
                    <div class="message-content">
                        <p>This is a <strong>primary paragraph</strong> with <em>emphasized text</em> and some <code>inline code</code>.</p>
                        <p class="secondary">This is a secondary paragraph with less important information.</p>
                        <p>Here's some <em class="subtle">subtle italic text</em> and <del>strikethrough content</del>.</p>
                        <small>This is small text for fine print.</small>
                    </div>
                </div>
            </div>

            <!-- Headers and Structure -->
            <div class="test-section">
                <div class="section-label">Headers & Structure</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:35</span>
                    </div>
                    <div class="message-content">
                        <h1>Main Heading</h1>
                        <p>Primary content under the main heading.</p>
                        <p class="metadata">Last updated: March 2024</p>
                        
                        <h2>Secondary Heading</h2>
                        <p>More primary content here.</p>
                        <div class="note">Note: This is additional context information.</div>
                        
                        <h3>Tertiary Heading</h3>
                        <p>Content with <span class="caption">Figure 1: Example caption</span></p>
                    </div>
                </div>
            </div>

            <!-- Lists and Bullets -->
            <div class="test-section">
                <div class="section-label">Lists & Bullets</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:36</span>
                    </div>
                    <div class="message-content">
                        <ul>
                            <li>Primary list item with important information</li>
                            <li class="secondary">Secondary list item with metadata</li>
                            <li>Another primary item
                                <div class="description">This is a description of the list item</div>
                            </li>
                            <li>Item with sub-content
                                <div class="sub-content">Additional details in grey</div>
                            </li>
                        </ul>
                        
                        <ol>
                            <li>First numbered item</li>
                            <li>Second item with <span class="version">v2.1.0</span></li>
                            <li>Third item with <span class="date">2024-03-15</span></li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Code Blocks -->
            <div class="test-section">
                <div class="section-label">Code Blocks</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:37</span>
                    </div>
                    <div class="message-content">
                        <p>Here's some <code>primary inline code</code> and <code class="secondary">secondary inline code</code>.</p>
                        
                        <pre class="language-javascript"><code>function example() {
    // This is a comment in grey
    const primary = "main code";
    const secondary = "less important"; // Another comment
    return primary;
}</code></pre>
                        
                        <div class="tech-meta">JavaScript ES6+</div>
                    </div>
                </div>
            </div>

            <!-- Tables -->
            <div class="test-section">
                <div class="section-label">Tables</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:38</span>
                    </div>
                    <div class="message-content">
                        <table>
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Status</th>
                                    <th class="secondary">Last Updated</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Primary Feature</td>
                                    <td>Active</td>
                                    <td class="secondary">2024-03-15</td>
                                </tr>
                                <tr>
                                    <td>Secondary Feature</td>
                                    <td>Beta</td>
                                    <td class="secondary">2024-03-10</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Q&A Format -->
            <div class="test-section">
                <div class="section-label">Q&A Format</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:39</span>
                    </div>
                    <div class="message-content">
                        <div class="question">How does the color system work?</div>
                        <div class="answer">The system uses a three-tier hierarchy with green for emphasis, white for primary content, and grey for secondary information.</div>
                        <div class="answer-note">This creates better visual organization and readability.</div>
                        
                        <div class="question">What about accessibility?</div>
                        <div class="answer">All color combinations meet WCAG contrast requirements.</div>
                        <div class="answer-note">Tested with various color blindness simulations.</div>
                    </div>
                </div>
            </div>

            <!-- Step-by-Step Instructions -->
            <div class="test-section">
                <div class="section-label">Step Instructions</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:40</span>
                    </div>
                    <div class="message-content">
                        <div class="step-title">Step 1: Setup</div>
                        <div class="step-description">Install the required dependencies and configure your environment.</div>
                        <div class="step-note">Note: This may take a few minutes depending on your connection.</div>
                        
                        <div class="step-title">Step 2: Configuration</div>
                        <div class="step-description">Update your configuration files with the new settings.</div>
                        <div class="step-note">Backup your existing config before making changes.</div>
                    </div>
                </div>
            </div>

            <!-- Links and References -->
            <div class="test-section">
                <div class="section-label">Links & References</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:41</span>
                    </div>
                    <div class="message-content">
                        <p>Check out the <a href="#">main documentation</a> for detailed information.</p>
                        <p>Also see: <a href="#" class="secondary">API reference</a> and <a href="#" data-type="meta">changelog</a>.</p>
                        
                        <div class="reference">Reference: Smith, J. (2024). Modern UI Design Patterns.</div>
                        <div class="source">Source: https://example.com/article</div>
                    </div>
                </div>
            </div>

            <!-- Status and Progress -->
            <div class="test-section">
                <div class="section-label">Status & Progress</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:42</span>
                    </div>
                    <div class="message-content">
                        <div class="progress-label">Installation Progress</div>
                        <div class="progress-detail">3 of 5 components installed</div>
                        
                        <p>Status: <span class="status">In Progress</span></p>
                        <p>Version: <span class="badge secondary">v1.2.3-beta</span></p>
                        
                        <div class="comment">This process will continue in the background.</div>
                    </div>
                </div>
            </div>

            <!-- Blockquotes and Special Elements -->
            <div class="test-section">
                <div class="section-label">Quotes & Special</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:43</span>
                    </div>
                    <div class="message-content">
                        <blockquote>
                            This is an important quote that stands out from the regular content.
                        </blockquote>
                        
                        <div class="aside">This is an aside with additional context information.</div>
                        
                        <p>Here's a <span class="hashtag">#hashtag</span> and some <span class="subdued">subdued text</span>.</p>
                        
                        <div class="footnote">¹ This is a footnote with additional details.</div>
                        <div class="timestamp">Last modified: 2024-03-15 14:30:22</div>
                    </div>
                </div>
            </div>

            <!-- Error States -->
            <div class="test-section">
                <div class="section-label">Error States</div>
                <div class="message ai">
                    <div class="message-header">
                        <div class="message-avatar"><i class="fas fa-robot"></i></div>
                        <span class="message-sender">Nation Assistant</span>
                        <span class="message-time">12:44</span>
                    </div>
                    <div class="message-content">
                        <div class="ai-error">This is an error message with important information.</div>
                        <div class="error-text">Another type of error styling for different contexts.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Add some interactivity for testing
        document.addEventListener('DOMContentLoaded', function() {
            console.log('AI Response Styling Test Page Loaded');
            
            // Add click handlers to test interactive elements
            document.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Link clicked:', this.textContent);
                });
            });
            
            // Test streaming cursor animation
            const streamingTest = document.createElement('div');
            streamingTest.innerHTML = 'Testing streaming: <span class="streaming-cursor">▊</span>';
            streamingTest.style.cssText = 'position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.8); padding: 8px; border-radius: 4px; font-size: 12px; color: #D0FF16; z-index: 1000;';
            document.body.appendChild(streamingTest);
            
            // Remove streaming test after 3 seconds
            setTimeout(() => {
                streamingTest.remove();
            }, 3000);
        });
    </script>
</body>
</html>