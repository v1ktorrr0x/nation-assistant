<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nation Assistant - Markdown Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/nation-theme.css">
    <link rel="stylesheet" href="styles/sidepanel.css">
</head>
<body>
    <div class="modern-chat-app">
        <header class="nation-header">
            <div class="header-content">
                <div class="brand-section">
                    <div class="logo-container">
                        <img src="title.png" alt="Nation Assistant" class="nation-logo">
                    </div>
                </div>
            </div>
        </header>

        <main class="chat-container">
            <div class="chat-messages" id="chat-messages">
                <!-- Test message will be inserted here -->
            </div>
        </main>
    </div>

    <script>
        // Test markdown content
        const testMarkdown = `# Enhanced Markdown Support

This is a test of the **enhanced markdown formatting** inspired by AI sidebar.

## Features Tested

### Text Formatting
- **Bold text** with enhanced styling
- *Italic text* with proper emphasis
- ~~Strikethrough text~~ with animation
- \`inline code\` with proper highlighting

### Lists
1. **Numbered lists** with enhanced styling
2. Proper nesting support
   - Nested bullet points
   - Multiple levels
     - Deep nesting works too
3. Mixed list types

### Code Blocks
\`\`\`javascript
function testFunction() {
    console.log("Enhanced code block formatting");
    return "with syntax highlighting";
}
\`\`\`

### Links and References
Check out [this enhanced link](https://example.com) with hover effects.

### Blockquotes
> This is an enhanced blockquote with better styling
> and improved visual hierarchy.

### Tables
| Feature | Status | Notes |
|---------|--------|-------|
| Headers | ✅ Enhanced | Better styling |
| Lists | ✅ Improved | Nested support |
| Code | ✅ Enhanced | Syntax highlighting |

---

### Horizontal Rules
The line above demonstrates enhanced horizontal rules.

This test verifies that all markdown elements are properly formatted during streaming while maintaining the original Nation Assistant aesthetic.`;

        // Initialize the formatter and test
        document.addEventListener('DOMContentLoaded', () => {
            // Load the sidepanel.js script
            const script = document.createElement('script');
            script.src = 'sidepanel.js';
            script.onload = () => {
                // Test the formatter
                const chatMessages = document.getElementById('chat-messages');
                
                // Create a test message
                const messageEl = document.createElement('div');
                messageEl.classList.add('message', 'ai');
                
                const messageHeader = document.createElement('div');
                messageHeader.classList.add('message-header');
                messageHeader.innerHTML = `
                    <div class="message-avatar"><i class="fas fa-robot"></i></div>
                    <span class="message-sender">Nation Assistant</span>
                    <span class="message-time">${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
                `;
                
                const messageContent = document.createElement('div');
                messageContent.classList.add('message-content');
                
                messageEl.appendChild(messageHeader);
                messageEl.appendChild(messageContent);
                chatMessages.appendChild(messageEl);
                
                // Test the enhanced formatter
                if (typeof aiFormatter !== 'undefined') {
                    const formattedContent = aiFormatter.format(testMarkdown);
                    
                    // Start streaming animation
                    if (typeof startTypingEffect !== 'undefined') {
                        startTypingEffect(messageContent, formattedContent);
                    } else {
                        messageContent.innerHTML = formattedContent;
                    }
                } else {
                    messageContent.innerHTML = '<p>Formatter not loaded. Please check sidepanel.js</p>';
                }
            };
            document.head.appendChild(script);
        });
    </script>
</body>
</html>